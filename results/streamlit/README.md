# 주요 목표:

    AI 기반 예측: 학습된 분류 모델(Stacking Model)을 사용하여 고객의 이탈 확률을 예측합니다.

    시각화 대시보드: 모든 고객 데이터와 예측된 이탈 위험 상태를 한눈에 볼 수 있도록 시각화합니다.

    메시지 센터: 이탈 위험 고객을 대상으로 맞춤형 메시지를 작성하고 발송(시뮬레이션)하여 고객 유지 활동을 지원합니다.


## 1️⃣ Streamlit 파일 구조

```
├── data/
│   └── BankChurners.csv  # 원본 데이터 파일
├── results/
│   └── Final_Model/
│       └── stacking_model.joblib # 최종 모델 파일
│   └── streamlit/
│       ├── main.py               # 메인 앱 실행 파일 (네비게이션 정의)
│       ├── dashboard.py          # 대시보드 페이지
│       ├── message_center.py     # 메시지 센터 페이지
│       └── utils.py              # 데이터/모델 로드, 전처리, 예측 유틸리티
└── src/
    └── preprocessing.py          # 전처리 파이프라인 정의 (외부 의존성)

```
    

    
## 2️⃣ 주요 기능 및 구성

### 2.1. 대시보드 (dashboard.py)

    데이터 로드 및 전처리: utils.py의 load_data 함수를 통해 데이터를 불러오고 불필요한 컬럼(Attrition_Flag, Naive_Bayes_...)을 제거하며, 컬럼명을 한국어로 변경합니다.

    AI 예측 실행: "🔍 이탈 위험 예측" 버튼을 클릭하면 utils.py의 load_model 및 predict_churn 함수를 사용하여 이탈 확률 및 고객 등급(일반, 안전, 주의, 위험)을 계산합니다.

    주요 통계: 총 고객 수, 이탈 위험 회원 수(예측 후)를 표시합니다.

    고객 데이터 목록: 예측 결과를 포함한 전체 고객 데이터를 테이블 형태로 보여주며, 이탈 위험 고객(주의, 위험 등급)은 행에 배경색을 적용하여 시각적으로 강조합니다.

    페이지네이션: 대규모 데이터셋의 원활한 탐색을 위해 2,000개 단위의 커스텀 페이지네이션 기능을 구현했습니다.

### 2.2. 고객 관리 메시지 센터 (message_center.py)

    타겟 고객 필터링: 대시보드에서 예측된 결과를 기반으로 이탈 위험 고객만 대상으로 합니다. 위험 등급(고위험, 중위험, 저위험) 및 발송 대상 수를 설정하여 타겟 고객을 선택할 수 있습니다.

    메시지 작성 및 발송:

        미리 정의된 메시지 템플릿을 제공하여 작성 편의성을 높입니다.

        메시지를 즉시 발송하거나 예약 발송할 수 있습니다 (실제 발송은 시뮬레이션).

        발송된 메시지 이력은 세션 상태(st.session_state.sent_messages)에 저장되어 발송 이력 탭에서 확인할 수 있습니다.

### 2.3. 유틸리티 및 모델 (utils.py)

    데이터 로드 (load_data): CSV 파일 로드, 컬럼 드롭, 한국어 컬럼명 매핑을 담당합니다. Streamlit의 st.cache_data를 사용하여 데이터 로드 속도를 최적화했습니다.

    모델 로드 (load_model): 학습된 Stacking 모델(stacking_model.joblib)을 불러옵니다. st.cache_resource를 사용하여 모델 로드 오버헤드를 줄입니다.

    추론 전처리 (preprocess_for_inference): 한국어 컬럼명을 영어로 되돌리고, 학습 시 사용한 파이프라인(preprocess_pipeline)을 적용하며, **특징 정렬(Feature Alignment)**을 통해 모델이 요구하는 컬럼 순서와 개수를 맞춰줍니다.

    이탈 예측 (predict_churn): 전처리된 데이터를 기반으로 이탈 확률을 예측하고, classify_risk_level 함수를 사용해 고객 등급을 부여합니다.

